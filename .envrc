# Load environment variables from .env file
if [ -f .env ]; then
  source .env

  # Export authentication tokens
  [ -n "$GITHUB_TOKEN" ] && export GITHUB_TOKEN
  [ -n "$GH_TOKEN" ] && export GITHUB_TOKEN=$GH_TOKEN  # Handle legacy GH_TOKEN
  [ -n "$CLAUDE_API_KEY" ] && export CLAUDE_API_KEY

  # Export Terraform AWS credentials
  # These are specifically for the terraform-deploy IAM user
  [ -n "$TERRAFORM_AWS_ACCESS_KEY_ID" ] && export TERRAFORM_AWS_ACCESS_KEY_ID
  [ -n "$TERRAFORM_AWS_SECRET_ACCESS_KEY" ] && export TERRAFORM_AWS_SECRET_ACCESS_KEY

  # Export other project variables if they exist
  [ -n "$BACKEND_PORT" ] && export BACKEND_PORT
  [ -n "$BACKEND_ENV" ] && export BACKEND_ENV
  [ -n "$BACKEND_DEBUG" ] && export BACKEND_DEBUG
  [ -n "$BACKEND_SECRET_KEY" ] && export BACKEND_SECRET_KEY
  [ -n "$BACKEND_CORS_ORIGINS" ] && export BACKEND_CORS_ORIGINS
  [ -n "$VITE_API_URL" ] && export VITE_API_URL
  [ -n "$VITE_APP_TITLE" ] && export VITE_APP_TITLE
  [ -n "$DATABASE_URL" ] && export DATABASE_URL
  [ -n "$REDIS_URL" ] && export REDIS_URL
  [ -n "$COMPOSE_PROJECT_NAME" ] && export COMPOSE_PROJECT_NAME
  [ -n "$DOCKER_BUILDKIT" ] && export DOCKER_BUILDKIT
  [ -n "$COMPOSE_DOCKER_CLI_BUILD" ] && export COMPOSE_DOCKER_CLI_BUILD
fi